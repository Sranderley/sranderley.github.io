<rc-demo-card
	card-title="Using rb-relay"
	github-link="'sranderley.github.io'"
	wordpress-link="bonsai-tree.us/rb-toggle">

	<rc-shelf name="radios">
		<shelf-title>Radio Buttons</shelf-title>
		<shelf-content>
			<rc-shelf-drawer>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioOne"
					group="one"
					ng-class="{
						on: radioOne.isActive()
					}"
					ng-click="radioOne.toggle()">
				</div>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioTwo"
					group="one"
					ng-class="{
						on: radioTwo.isActive()
					}"
					ng-click="radioTwo.toggle()">
				</div>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioThree"
					group="one"
					ng-class="{
						on: radioThree.isActive()
					}"
					ng-click="radioThree.toggle()">
				</div><br>
				<label class="btn-label">Radio Buttons</label>
			</rc-shelf-drawer>
			<rc-shelf-drawer>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioOne"
					group="one"
					ng-class="{
						on: radioOne.isActive()
					}"
					ng-click="radioOne.toggle()">
				</div>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioTwo"
					group="one"
					ng-class="{
						on: radioTwo.isActive()
					}"
					ng-click="radioTwo.toggle()">
				</div>
				<div
					class="radio-btn"
					rb-relay
					relay-api="radioThree"
					group="one"
					ng-class="{
						on: radioThree.isActive()
					}"
					ng-click="radioThree.toggle()"
					disabled="true">
				</div><br>
				<label class="btn-label">Disabled Radio Button</label>
			</rc-shelf-drawer>
		</shelf-content>
		<rc-code-viewer
			name="test"
		>
			<js-code>
	angular
		.module('reusableBehaviors')
		.factory('rbRelayService', rbRelayService);

	function rbRelayService(){
		var groups = {};

		var s = {
			register: register,
			toggle: toggle,
			reset: reset,
			active: {}
		};

		return s;

		function register(index, isFirst){
			if(!groups[index]) groups[index] = 0;
			if(! (s.active[index] >= 0) ) s.active[index] = -1;

			var id = groups[index]++;

			if(isFirst){
				s.active[index] = id;
			}

			return id;
		}

		function toggle(index, id){
			s.active[index] = id;
		}

		function reset(index){
			s.active[index] = -1;
		}
	}

	angular
		.module('reusableBehaviors')
		.directive('rbRelay', rbRelay);

		rbRelay.$inject = ['rbRelayService'];

	function rbRelay(rbRelayService){
		var s = rbRelayService;
		return {
			restrict: 'A',
			scope: {
				relayApi: '=',
				group: '=',
				first: '=?'
			},
			link: function(scope, elem, attr){
				scope.relayApi = {
					isActive: isActive,
					toggle: toggle,
					reset: reset
				};

				scope.group = attr.group;

				if ( !scope.first ) scope.first = false;

				scope.id = s.register( attr.group, attr.first );

				function isActive(){
					return s.active[scope.group] === scope.id ? true : false;
				}

				function toggle(){
					if ( ! attr.disabled ) {
						var val = isActive() ? false : scope.id;
						s.toggle(scope.group, val);
					}
				}

				function reset(){
					s.reset(scope.group);
				}
			}
		}
	}
			</js-code>
			<html-code>
			Switch
			&lt;div class="switch-container"
				rb-toggle
				toggle-api="switch"
				ng-class="{
					off: !switch.active,
					on: switch.active
				}"
				ng-click="switch.toggle()"
			&gt;
				&lt;div class="switch-text"
					ng-class="{
						hidden: !switch.active,
						shown: switch.active
					}"
				&gt;ON&lt;/div&gt;
				&lt;div class="slider"&gt;&lt;/div&gt;
				&lt;div class="switch-text"
					ng-class="{
						hidden: switch.active,
						shown: !switch.active
					}"
				&gt;OFF&lt;/div&gt;
			&lt;/div&gt;
			</html-code>
			<css-code>
			.switch-container {
				transition: background-color 0.1s;
				border: 1px solid #999999;
				border-radius: 5px;
				width: 50px;
				height: 25px;
				cursor: pointer;
				overflow: hidden;
			}

			.switch-container.off{
				background-color: #bbbbbb;
			}

			.switch-container.on{
				background-color: blue;
			}

			.switch-text {
				background-color: inherit;
				color: white;
				text-align: center;
				transition: width 0.1s;
				font-weight: bold;
				line-height: 25px;
				overflow: hidden;
				float: left;
				-webkit-touch-callout: none; /* iOS Safari */
				-webkit-user-select: none;   /* Chrome/Safari/Opera */
				-khtml-user-select: none;    /* Konqueror */
				-moz-user-select: none;      /* Firefox */
				-ms-user-select: none;       /* Internet Explorer/Edge */
				user-select: none;
			}

			.switch-text.hidden {
				width: 0;
			}

			.switch-text.shown {
				width: 80%;
			}

			.slider {
				background-color: white;
				border: 1px solid #999999;
				border-radius: 2px;
				height: 23px;
				width: 20%;
				float: left;
			}
			</css-code>
		</rc-code-viewer>
	</rc-shelf>

	<rc-shelf name="styling">
		<shelf-title>Button Styling</shelf-title>
		<shelf-content>
			<rc-shelf-drawer>
				<div
					class="btn"
					rb-relay
					relay-api="btnOne"
					group="one"
					ng-class="{
						on: btnOne.isActive()
					}"
					ng-click="btnOne.toggle()">
				</div>
				<div
					class="btn"
					rb-relay
					relay-api="btnTwo"
					group="one"
					ng-class="{
						on: btnTwo.isActive()
					}"
					ng-click="btnTwo.toggle()">
				</div>
				<div
					class="btn"
					rb-relay
					relay-api="btnThree"
					group="one"
					ng-class="{
						on: btnThree.isActive()
					}"
					ng-click="btnThree.toggle()">
				</div><br>
				<label class="btn-label">Styled Buttons</label>
			</rc-shelf-drawer>
			<rc-shelf-drawer>
				<div
					class="btn"
					rb-relay
					relay-api="btnOne"
					group="one"
					ng-class="{
						on: btnOne.isActive()
					}"
					ng-click="btnOne.toggle()">
				</div>
				<div
					class="btn"
					rb-relay
					relay-api="btnTwo"
					group="one"
					ng-class="{
						on: btnTwo.isActive()
					}"
					ng-click="btnTwo.toggle()">
				</div>
				<div
					class="btn"
					rb-relay
					relay-api="btnThree"
					group="one"
					ng-class="{
						on: btnThree.isActive()
					}"
					ng-click="btnThree.toggle()"
					disabled="true">
				</div><br>
				<label class="btn-label">Disabled Button</label>
			</rc-shelf-drawer>
		</shelf-content>
		<rc-code-viewer>
			<js-code></js-code>
			<html-code></html-code>
			<css-code></css-code>
		</rc-code-viewer>
	</rc-shelf>
</rc-demo-card>